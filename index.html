<html>
    <body>
        <div style="float:left;width:50%;padding:10px">
            <ul id='logs'></ul>
        </div>
        <div style="float:left;width:50%;padding:10px">
            <form id="sendMessage">
                <input type="text" id="message" />
                <button type="button" onclick="sendMessage()">INVIA MESSAGGIO</button>
            </form>
            <form id="sendMessage">
                <input type="text" id="id_location" />
                <button type="button" onclick="getLocationMoments()">GET LOCATION MOMENTS</button>
            </form>
            <button type="button" onclick="sendToOthers()">SEND TO OTHERS</button>
        </div>
        <script src="/socket.io/socket.io.js"></script>
        <script>
            var socket = io();
            var logs = document.getElementById('logs');
            socket.on('clientConnected', function(string) {
                var node = document.createElement("LI");
                var textnode = document.createTextNode('CONNECT: ' + string);
                node.appendChild(textnode);
                logs.appendChild(node);
            });
            socket.on('clientDisconnected', function(string) {
                var node = document.createElement("LI");
                var textnode = document.createTextNode('DISCONNECT: ' + string);
                node.appendChild(textnode);
                logs.appendChild(node);
            });
            socket.on('time', function(string) {
                var node = document.createElement("LI");
                var textnode = document.createTextNode('TIME: ' + string);
                node.appendChild(textnode);
                logs.appendChild(node);
            });
            socket.on('messageReceived', function(string) {
                var node = document.createElement("LI");
                var textnode = document.createTextNode('MESSAGE RECEIVED: ' + string);
                node.appendChild(textnode);
                logs.appendChild(node);
            });
            socket.on('set_location_moments', function(response) {
                console.log(response)
            });
            socket.on('get_send_to_others', function(response) {
                console.log(response)
            });
            function sendMessage() {
                var input = document.getElementById('message');
                var val = input.value;
                socket.emit('message', val);
            }
            function getLocationMoments() {
                var input = document.getElementById('id_location');
                var val = input.value;
                var body = {
                    id_location: val
                }
                socket.emit('get_location_moments', body);
            }
            function sendToOthers() {
                socket.broadcast.emit('get_send_to_others');
            }
        </script>
    </body>
</html>
