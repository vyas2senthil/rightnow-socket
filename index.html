<html>
    <body>
        <div style="display:flex">
            <div style="float:left;width:50%;padding:10px">
                <ul id='logs'></ul>
            </div>
            <div style="float:left;width:50%;padding:10px">
                <div id="sendMessage">
                    <input type="text" id="message" />
                    <button type="button" onclick="sendMessage()">INVIA MESSAGGIO</button>
                </div>
                <div id="sendMessage">
                    <input type="text" id="id_location" />
                    <button type="button" onclick="getLocationMoments()">GET LOCATION MOMENTS</button>
                </div>
                <button type="button" onclick="sendToOthers()">SEND TO OTHERS</button>
            </div>
        </div>
        <script src="/socket.io/socket.io.js"></script>
        <script>
            var socket = io();
            var logs = document.getElementById('logs');
            socket.on('clientConnected', function(string) {
                setupLog('clientConnected',response,true)
            });
            socket.on('messageReceived', function(response) {
                setupLog('messageReceived',response,true)
            });
            socket.on('getLocationMoments', function(response) {
                setupLog('getLocationMoments',response,false)
            });
            socket.on('setSendToOthers', function(response) {
                setupLog('setSendToOthers',response,false)
            });
            function sendMessage() {
                var val = document.getElementById('message').value;
                socket.emit('message', val);
            }
            function getLocationMoments() {
                var val = document.getElementById('id_location').value;
                var body = {id_location: val}
                socket.emit('getLocationMoments', body);
            }
            function sendToOthers() {
                socket.emit('getSendToOthers', "response");
            }
            function setupLog(event,response,print) {
                if(print) {
                    var node = document.createElement("LI");
                    var textnode = document.createTextNode('<strong>'+event+'</strong>: ' + response);
                    node.appendChild(textnode);
                    logs.appendChild(node);
                } else {
                    console.log(event,response)
                }
            }
        </script>
    </body>
</html>
